---
title: "Claude Codeを使い始めて生産性が変わった話 ― CLAUDE.mdの設計が鍵"
emoji: "🚀"
type: "tech"
topics: ["claudecode", "ai", "cli", "開発環境", "anthropic"]
published: true
---

## Claude Codeとは何か

Claude CodeはAnthropicが公式に提供しているCLIツールだ。ターミナル上でClaudeと対話しながら、ファイルの読み書き、Git操作、コマンド実行、コードの生成・修正まで全部やってくれる。

CopilotやCursorとの違いは、エディタに依存しないこと。ターミナルさえあれば動く。そしてプロジェクト全体のコンテキストを読み込んだうえで作業するので、ファイル単位ではなくリポジトリ単位で仕事ができる。

自分は約半年使っているが、最初の1週間で「これは開発スタイルが変わる」と確信した。ただし、ただインストールして使い始めるだけだと本来の力の半分も出ない。鍵になるのがCLAUDE.mdという設定ファイルだ。

---

## インストールと初期セットアップ

まずは導入から。

### インストール

```bash
npm install -g @anthropic-ai/claude-code
```

Node.js 18以上が必要。インストールしたら `claude` コマンドで起動できる。

```bash
cd ~/my-project
claude
```

プロジェクトのディレクトリで起動するのが基本だ。Claude Codeはカレントディレクトリのファイルを読み込んでコンテキストとして使う。

### 初回認証

初回起動時にAnthropicアカウントとの認証が走る。ブラウザが開いてログインするだけ。APIキーを環境変数に設定する方法もある。

```bash
export ANTHROPIC_API_KEY=sk-ant-xxxxx
```

ここまでで動く状態にはなる。だが、ここからが本番だ。

---

## CLAUDE.mdがなぜ重要なのか

Claude Codeにはプロジェクト固有のルールや知識を伝える仕組みがある。それがCLAUDE.mdだ。プロジェクトルートに置くと、Claude Codeが毎回の起動時に自動で読み込む。

### CLAUDE.mdがないとどうなるか

Claude Codeは賢い。だが、プロジェクト固有の事情は知らない。

- テストは `pytest` なのか `go test` なのか
- コミットメッセージの規約はあるか
- 使っているフレームワークのバージョンは何か
- 触ってはいけないファイルはあるか

これらを毎回口頭で伝えるのは面倒だし、どこかで漏れる。CLAUDE.mdに書いておけば、Claude Codeが毎回自動でルールを守ってくれる。

### 自分の体感

CLAUDE.mdを整備する前と後で、Claude Codeへの指示回数が体感で半分以下になった。「あ、それじゃなくてこっちのフォーマットで」「テストはこのコマンドで」みたいな修正指示がほぼなくなる。最初の1時間をCLAUDE.mdに使うことで、その後の何十時間が楽になる。

---

## CLAUDE.mdの実践的な書き方

では実際にどう書くか。自分が使っているパターンを簡略化して紹介する。

### 基本構成

```markdown
# プロジェクト概要

フロントエンドはNext.js 15（App Router）、バックエンドはGo。
DBはPostgreSQL。Docker Composeで開発環境を構築している。

## 開発コマンド

- フロントエンド: `cd frontend && npm run dev`（ポート3000）
- バックエンド: `cd backend && go run main.go`（ポート8080）
- テスト: `cd backend && go test ./...`
- lint: `cd frontend && npm run lint`

## コーディング規約

- コミットメッセージは日本語、動詞始まり（例: 「ユーザー認証を追加」）
- Go のエラーハンドリングは必ずラップする（fmt.Errorf で %w を使う）
- フロントエンドのコンポーネントは機能単位でディレクトリを切る

## 触らないファイル

- `docker-compose.prod.yml`（本番用、ローカル開発では使わない）
- `.env.production`（本番シークレット）

## よくある間違い

- フロントエンドの `npm install` はルートではなく `frontend/` で実行する
- バックエンドの DB 接続先は環境変数 `DATABASE_URL` で指定する
```

### ポイントは3つ

**1. 開発コマンドを書く**

Claude Codeがテストを走らせたりビルドしたりするとき、正しいコマンドを使ってくれる。ディレクトリの指定まで書いておくと間違いが減る。

**2. コーディング規約を書く**

コミットメッセージの形式、命名規則、エラーハンドリングのスタイル。人間の新メンバーに伝えるのと同じ内容をClaude Codeにも伝える。

**3. やってはいけないことを書く**

触るべきでないファイル、実行すべきでないコマンド。禁止事項を明示しておくとClaude Codeが暴走しない。

---

## CLAUDE.mdの配置場所

CLAUDE.mdは3つのレベルで配置できる。

| 場所 | スコープ | 用途 |
|------|---------|------|
| `~/.claude/CLAUDE.md` | グローバル | 全プロジェクト共通のルール |
| `プロジェクトルート/CLAUDE.md` | プロジェクト | プロジェクト固有の規約 |
| `サブディレクトリ/CLAUDE.md` | ディレクトリ | 特定ディレクトリの追加ルール |

グローバルには「コミットは必ず確認を取ってから」「日本語で応答する」など、どのプロジェクトでも共通のルールを書く。プロジェクトルートには技術スタックや開発コマンドを書く。この使い分けが効く。

---

## すぐに試せる3つのTips

CLAUDE.mdの話だけだと抽象的なので、Claude Codeを使い始めてすぐ効果が出たTipsを3つ紹介する。

### Tip 1: まずプロジェクトの理解を頼む

新しいプロジェクトで最初にやることは、Claude Codeにプロジェクトを読ませることだ。

```
このプロジェクトの構成を把握して、CLAUDE.mdのドラフトを作って
```

Claude Codeがディレクトリ構造、package.json、設定ファイルなどを読み込んで、CLAUDE.mdのたたき台を作ってくれる。ゼロから書くより圧倒的に速い。自分はこのドラフトをベースに、規約や禁止事項を足していく形で運用している。

### Tip 2: Gitの操作はClaude Codeに任せる

ブランチ作成、コミット、差分確認。Git操作をClaude Codeに任せると楽になる。

```
この変更をフィーチャーブランチにコミットして。PRも作って
```

コミットメッセージの規約をCLAUDE.mdに書いておけば、毎回フォーマットを守った適切なメッセージを書いてくれる。PRのdescriptionも変更内容を読み取って自動で書いてくれる。

### Tip 3: エラーをそのまま貼る

ビルドエラー、テストの失敗、ランタイムエラー。エラーメッセージをそのままClaude Codeに貼るだけで、原因の特定から修正まで一気にやってくれる。

```
このエラーを直して:
Error: Cannot find module '@/components/Header'
```

Claude Codeはプロジェクト内のファイルを検索して、パスの間違いやインポートの修正を提案し、許可すればそのまま直してくれる。スタックトレースが長くても全部読んでくれるので、人間がログを追うよりも速いことが多い。

---

## 使い始めて変わったこと

Claude Codeを導入して半年。一番変わったのは「作業の起動コスト」だ。

以前は新しいタスクに取りかかるとき、まずどのファイルを触るか調べて、関連するコードを読んで、方針を考えて、ようやく手が動き始めていた。

今はタスクの内容をClaude Codeに伝えるだけで、関連ファイルの特定から修正案の提示まで数秒で出てくる。自分の仕事は方針の判断と最終確認に集中できる。

CLAUDE.mdを丁寧に書いておくと、この流れがさらにスムーズになる。毎回「このプロジェクトではTypeScriptを使っていて...」と説明しなくていい。Claude Codeが既に知っている状態から会話が始まる。新しいメンバーが即戦力になるオンボーディング資料を用意しておくのと同じ感覚だ。

---

## まとめ

Claude Codeの導入は、インストールして終わりではない。CLAUDE.mdにプロジェクトの知識を集約することで、Claude Codeが本当に使えるツールになる。

- インストールは `npm install -g @anthropic-ai/claude-code` だけ
- CLAUDE.mdに開発コマンド、規約、禁止事項を書く
- プロジェクト理解、Git操作、エラー修正から始めると効果を実感しやすい

この記事で紹介したのは基本的な使い方とシンプルなCLAUDE.mdの例だ。実際の運用では、チーム開発での共有ルール、カスタムスキルとの連携、サブエージェントの活用など、もっと深い設計が効いてくる。

CLAUDE.mdのテンプレートや、チームでの導入ガイドを含む完全版は、noteの有料記事で公開しています。
